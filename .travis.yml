os: osx
language: generic
before_script:
- brew update
- brew install --HEAD usbmuxd
- brew unlink usbmuxd
- brew link usbmuxd
- brew install --HEAD libimobiledevice
- brew install ideviceinstaller
- brew install ios-deploy
- git clone https://github.com/flutter/flutter.git -b beta --depth 1
script:
- flutter/bin/flutter build ios --debug --no-codesign
cache:
  directories:
  - "$HOME/.pub-cache"
before_deploy:
- pushd build/ios/iphoneos
- mkdir Payload
- cd Payload
- ln -s ../Runner.app
- cd ..
- zip -r app.ipa Payload
- popd
deploy:
  provider: releases
  api_key:
    secure: ZZFpNS6bb7v6kIi8ZCkJaI6ZIkTrnaRponEUZIJomOOUlQQFwR65+FgGXd7CmYWmAg5A1cBu58IUeUr6V5DXu2YYIgKgAi74+8yCwSIvbznyHJO3dAauBoIqVlxsOyMHOukbBgGNfmGcFUYQNd3waVVSfoXR3dRX2JDPgSi556WVjuGQG0a/GC9ZL4Hj8VvFhCWYrVySDEW+CLVqpTFDJayLyUWIr5HCLL33rmkBmxJzw6wlqV0/71oWDPZY+3t0pSwkrs+IXrZC7V4qShS6F55i32bK/YxRFeaytqhqwcbjKQLzvN2dgh2PEjS/gfDKv7UZVLkG/ITpaflPCD8DcbctRGx8HwZPXxqemincXdZ0EVD5uOZR2ZCdd/+D5WFU8ZYNsMmjX+bTZCqmDzaTFL/vT/ZNKheeD6QW89MWyKM3liRU+bD4f9CyMr+hqech6hgirJDQRsvy5rf6l5pw2y52gl+hzJeXoFlZ8WzDcLdPF5oPckPMEVxL07hCcCEyhYI/Qy92DPml0BQkUAREyw/boZP5NMuSTFjXBbfRGSEtscP81ds7TaJuxipSDI1OTsGa/WPW/35JUQr6MQY/8Hf2vPa7vas9pF2tkh3PguHD15aO/8p8pMaDncHkawzLHyf3IMkGWvgOf3w8vzVCEk8SgHsFbqgBPT2B+oT0Obk=
  file: build/ios/iphoneos/app.ipa
  on:
    repo: BigMoscows/bm_board_flutter
